<ion-content>
  <app-titlebar></app-titlebar>
  <!-- Packet creation on the backend -->
  <ion-grid class="container ion-text-center ion-padding" *ngIf="creatingPacket">
    Creating packet, please wait
    <ion-spinner></ion-spinner>
  </ion-grid>

  <!-- Payment info -->
  <ion-grid class="container ion-text-center ion-padding" *ngIf="createdPacket && !creatingPacket">
    <!-- Intro -->
    <p>
      You are about to finalize your red packet. Please confirm sending the following tokens to the red packet service.
    </p>
    <p *ngIf="packetContainsERC20Tokens()">
      <b>Note</b>: you have to send both native tokens and ERC20 tokens.
    </p>
    <p>
      <b>Note</b>: unspent tokens and provisionning fees are returned at the expiration of the red packet.
    </p>

    <!-- Cost summary -->
    <div class="nativeSummary">
      <h4>{{getNativeTokenSymbol()}}</h4>
      <ion-row>
        <ion-col size="6" class="header">Red packet</ion-col>
        <ion-col size="6" class="cost">{{getNativeRedPacketValue()}} {{getNativeTokenSymbol()}}</ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="6" class="header">Transaction fees</ion-col>
        <ion-col size="6" class="cost">{{getNativeTokenTxFees()}} {{getNativeTokenSymbol()}}</ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="6" class="header">Service fees (${{getNativeTokenServiceFeesUSD()}} USD)</ion-col>
        <ion-col size="6" class="cost">{{getNativeTokenServiceFees()}} {{getNativeTokenSymbol()}}</ion-col>
      </ion-row>

      <div class="custom-btn mt1" (click)="sendNativeToken()">
        <ion-label>Send {{getNativeTokenTotal()}} {{getNativeTokenSymbol()}}</ion-label>
      </div>
    </div>

    <div class="erc20summary" *ngIf="createdPacket.costs.erc20Token">
      <h4>{{getERC20TokenSymbol()}}</h4>
      <ion-row>
        <ion-col size="6" class="header">Red packet</ion-col>
        <ion-col size="6" class="cost">{{getERC20RedPacketValue()}} {{getERC20TokenSymbol()}}</ion-col>
      </ion-row>

      <div class="custom-btn mt1" (click)="sendERC20Tokens()">
        <ion-label>Send {{getERC20TokenTotal()}} {{getERC20TokenSymbol()}}</ion-label>
      </div>
    </div>

    <h4>Status</h4>
    <p>The red packet is live!</p>

  </ion-grid>
</ion-content>