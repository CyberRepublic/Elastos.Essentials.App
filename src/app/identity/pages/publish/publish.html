<app-titlebar></app-titlebar>
<ion-content class="container">
    <div [class.darkContainer]="theme.darkMode">
        <h1>{{ 'publish' | translate }}</h1>

        <span>- {{ 'showing-all-visible-credentials' | translate }}</span>
        <span>- {{ 'toggle-credentials-to-publish'| translate }}</span>

        <div class="alert-section">
            <img *ngIf="profileService.getPublishedCredentials().length > 0" src="/assets/identity/svg/credential-published.svg"
                class="published" />
            <img *ngIf="profileService.getPublishedCredentials().length == 0" src="/assets/identity/svg/publish-gray.svg"
                class="published" />

            <span>{{ profileService.getPublishedCredentials().length }}/{{ profileService.allCreds.length }}
                {{ 'credentials-published-on-blockchain' | translate }}
            </span>
        </div>

        <div class="list-credentials-section">
            <div class="card" *ngFor="let entry of publishableCredentials()">
                <div class="card-icon">

                    <img *ngIf="!isAvatarCred(entry)" [src]="getCredIconSrc(entry)" />
                    <div *ngIf="isAvatarCred(entry)">
                        <img class="avatar" [src]="getAvatar(entry)" />
                    </div>
                </div>
                <div class="card-internal">
                    <ion-grid class="card-body">
                        <ion-row>
                            <ion-col size="10">
                                <div class="card-header">
                                    <span class="card-title">{{ getDisplayableCredentialTitle(entry) }}</span>
                                </div>
                                <span class="card-value"
                                    *ngFor="let prop of displayableProperties(entry.credential)">{{ prop.value }}</span>

                            </ion-col>
                            <ion-col size="2">
                                <div class="card-action">
                                    <ion-toggle [(ngModel)]="entry.isVisible"
                                        (ngModelChange)="onVisibilityChange($event, entry)"></ion-toggle>
                                </div>
                            </ion-col>
                        </ion-row>
                    </ion-grid>
                </div>
            </div>
        </div>
        <div class="button-section">
            <ion-button expand="block" (click)="profileService.showWarning('publishIdentity', '')">
                {{ 'confirm' | translate}}
            </ion-button>
        </div>
    </div>

</ion-content>